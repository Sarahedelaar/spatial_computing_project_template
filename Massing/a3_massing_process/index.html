
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.2">
    
    
      
        <title>Process - Spatial Computing Project "8bit hub"</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.19190aaf.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.24b84193.min.css">
        
          
          
          <meta name="theme-color" content="#02a6f2">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="light-blue" data-md-color-accent="">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#massing-process" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Spatial Computing Project &#34;8bit hub&#34;" class="md-header-nav__button md-logo" aria-label="Spatial Computing Project "8bit hub"">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Spatial Computing Project "8bit hub"
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Process
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Spatial Computing Project &#34;8bit hub&#34;" class="md-nav__button md-logo" aria-label="Spatial Computing Project "8bit hub"">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    Spatial Computing Project "8bit hub"
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Planning
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Planning" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Planning
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Planning/a1_planning_process/" class="md-nav__link">
      Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Planning/a1_planning_product/" class="md-nav__link">
      Product
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Configuring
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Configuring" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Configuring
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Configuring/a2_configuring_process/" class="md-nav__link">
      Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Configuring/a2_configuring_product/" class="md-nav__link">
      Product
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Massing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Massing" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Massing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Process
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Process
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluate-voxels" class="md-nav__link">
    Evaluate voxels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#seed-allocation" class="md-nav__link">
    Seed allocation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-value" class="md-nav__link">
    Change value
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#special-behaviours" class="md-nav__link">
    Special behaviours
  </a>
  
    <nav class="md-nav" aria-label="Special behaviours">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#squareness" class="md-nav__link">
    Squareness
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prevent-floating-agents" class="md-nav__link">
    Prevent floating agents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limiting-building-depth" class="md-nav__link">
    Limiting building depth
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-mass" class="md-nav__link">
    Final mass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behaviours-and-expectations" class="md-nav__link">
    Behaviours and expectations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gif-growth-example" class="md-nav__link">
    GIF growth example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centers-of-clusters" class="md-nav__link">
    Centers of clusters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shafts" class="md-nav__link">
    Shafts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paths" class="md-nav__link">
    Paths
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../a3_massing_product/" class="md-nav__link">
      Product
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Forming
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Forming" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Forming
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Forming/a4_forming_process/" class="md-nav__link">
      Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Forming/a4_forming_product/" class="md-nav__link">
      Product
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about/" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Final Deliveries
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Final Deliveries" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Final Deliveries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Final_Deliveries/reflection/" class="md-nav__link">
      Reflection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Final_Deliveries/poster/" class="md-nav__link">
      Poster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3">
    
    <label class="md-nav__link" for="nav-7-3">
      Scripts
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Scripts" data-md-level="2">
      <label class="md-nav__title" for="nav-7-3">
        <span class="md-nav__icon md-icon"></span>
        Scripts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/distance_entrance/" class="md-nav__link">
      Distance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/dynamic_fields/" class="md-nav__link">
      Dynamic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/distance_floor/" class="md-nav__link">
      Floor distance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/green_view/" class="md-nav__link">
      Green
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/noise/" class="md-nav__link">
      Noise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/shadow/" class="md-nav__link">
      Shadow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/svf/" class="md-nav__link">
      SVF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/sun_acc/" class="md-nav__link">
      Sun
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/functions/" class="md-nav__link">
      Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/grow_agents/" class="md-nav__link">
      Initialization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/shafts_corridors/" class="md-nav__link">
      Shafts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Scripts/voxelization/" class="md-nav__link">
      Voxelization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Final_Deliveries/figures/" class="md-nav__link">
      Figures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Final_Deliveries/presentations/" class="md-nav__link">
      Presentations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Final_Deliveries/bibliography/" class="md-nav__link">
      Bibliography
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Documenting (TBR)
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Documenting (TBR)" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        Documenting (TBR)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../documenting/instructions/" class="md-nav__link">
      Instructions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documenting/folder_structure/" class="md-nav__link">
      Folder Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../documenting/guidelines/" class="md-nav__link">
      Guidelines
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluate-voxels" class="md-nav__link">
    Evaluate voxels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#seed-allocation" class="md-nav__link">
    Seed allocation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-value" class="md-nav__link">
    Change value
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#special-behaviours" class="md-nav__link">
    Special behaviours
  </a>
  
    <nav class="md-nav" aria-label="Special behaviours">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#squareness" class="md-nav__link">
    Squareness
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prevent-floating-agents" class="md-nav__link">
    Prevent floating agents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limiting-building-depth" class="md-nav__link">
    Limiting building depth
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-mass" class="md-nav__link">
    Final mass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behaviours-and-expectations" class="md-nav__link">
    Behaviours and expectations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gif-growth-example" class="md-nav__link">
    GIF growth example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centers-of-clusters" class="md-nav__link">
    Centers of clusters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shafts" class="md-nav__link">
    Shafts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paths" class="md-nav__link">
    Paths
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="massing-process"><strong>Massing: process</strong></h1>
<hr />
<h2 id="introduction"><strong> Introduction </strong></h2>
<blockquote>
<p>In this section the growth of the ABM (agent based model) will be discussed. There are several special behaviours which were created to guide the growth and to get a configuration which matches the design goals best. For every behaviour a function is created, tested and evaluated. In the end different configurations will be discussed with respect to the design goals, they all use a different combination of behaviours. </p>
</blockquote>
<h3 id="evaluate-voxels"><strong>Evaluate voxels</strong></h3>
<blockquote>
<p>Before the process of growing the voxels can start, we need a way to evaluate all the voxels in order to know where every agent wants to grow. That is the purpose of this function. The fields, created in the configuring part, will be combined with the preferences  from the program of requirements. For the to be evaluated voxels the original value from a particular field will be raised by the preference to get the new value. The value of each voxel will be different for every agent and different for each iteration.</p>
</blockquote>
<figure>
<p><img align="left" alt="Evaluate" src="../../img/evaluate_voxel.png" />
  </p>
<figcaption>Evaluate voxel</figcaption>
</figure>
<p><strong> Pseudo code</strong>
<table class="highlighttable"><tr><th colspan="2" class="filename"><div class="highlight"><span class="filename">Evaluate_voxels.py</span></div></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">Input</span><span class="p">:</span> <span class="n">location</span> <span class="n">of</span> <span class="n">the</span> <span class="n">to</span> <span class="n">be</span> <span class="n">evaluated</span> <span class="n">voxels</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">preferences</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="n">Create</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">full</span> <span class="n">of</span> <span class="n">ones</span> <span class="k">with</span> <span class="n">the</span> <span class="n">same</span> <span class="n">length</span> <span class="k">as</span> <span class="n">the</span> <span class="n">amount</span> <span class="n">of</span> <span class="n">voxels</span> <span class="n">to</span> <span class="n">be</span> <span class="n">evaluated</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="n">For</span> <span class="n">each</span> <span class="n">agent</span><span class="p">:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>  <span class="n">Find</span> <span class="n">the</span> <span class="n">raw</span> <span class="n">value</span> <span class="n">of</span> <span class="n">these</span> <span class="n">voxels</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">fields</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>  <span class="n">Raise</span> <span class="n">these</span> <span class="n">values</span> <span class="k">with</span> <span class="n">the</span> <span class="n">weight</span> <span class="n">of</span> <span class="n">each</span> <span class="n">preference</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>  <span class="n">Multiply</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">new</span> <span class="n">values</span> <span class="k">with</span> <span class="n">each</span> <span class="n">other</span> <span class="n">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">final</span> <span class="n">value</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="n">Return</span> <span class="n">the</span> <span class="n">final</span> <span class="n">values</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="n">Output</span><span class="p">:</span> <span class="n">new</span> <span class="n">values</span> <span class="n">of</span> <span class="n">evaluated</span> <span class="n">voxels</span>
</code></pre></div>
</td></tr></table></p>
<h3 id="seed-allocation"><strong>Seed allocation</strong></h3>
<blockquote>
<p>We started the massing part by initializing the agents. We used the function to evaluate voxels. At first the agents are placed at the spot where they feel most comfortable, see the first image. Furthermore, we added another feature to the initialization part. When the agents are at the place with the highest values, they are moved down to ground level, which can be seen in the second image. This is done to discourage too many floating agents later in the process.</p>
</blockquote>
<figure>
<p><img align="left" alt="Initialization" src="../../img/init_agents_original.png" />
  </p>
<figcaption>Original initialization of the agents</figcaption>
</figure>
<figure>
<p><img align="left" alt="Initialization" src="../../img/agents_init.png" />
  </p>
<figcaption>Improved initialization of the agents</figcaption>
</figure>
<p><strong> Pseudo code</strong>
<table class="highlighttable"><tr><th colspan="2" class="filename"><div class="highlight"><span class="filename">Initialization_agents.py</span></div></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">Input</span><span class="p">:</span> <span class="n">voxelized_envelope</span><span class="o">.</span><span class="n">csv</span> <span class="p">(</span><span class="n">high</span> <span class="n">res</span><span class="p">),</span> <span class="n">fields</span><span class="p">,</span> <span class="n">program</span> <span class="n">of</span> <span class="n">requirement</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="n">Initialize</span> <span class="n">the</span> <span class="n">empty</span> <span class="n">occupation</span> <span class="n">lattice</span> <span class="p">(</span><span class="n">full</span> <span class="n">of</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="n">For</span> <span class="n">every</span> <span class="n">agent</span> <span class="nb">id</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">agent</span> <span class="n">preferences</span><span class="p">:</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>  <span class="n">Create</span> <span class="n">a</span> <span class="n">preference</span> <span class="n">lattice</span> <span class="k">for</span> <span class="n">every</span> <span class="n">agent</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>  <span class="n">Raise</span> <span class="n">the</span> <span class="n">value</span> <span class="n">of</span> <span class="n">every</span> <span class="n">field</span> <span class="n">by</span> <span class="n">the</span> <span class="n">weight</span> <span class="n">given</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">program</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>  <span class="n">Select</span> <span class="n">the</span> <span class="n">voxel</span> <span class="k">with</span> <span class="n">the</span> <span class="n">highest</span> <span class="n">value</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>  <span class="n">Move</span> <span class="n">the</span> <span class="n">voxel</span> <span class="n">to</span> <span class="n">ground</span> <span class="n">level</span><span class="p">,</span> <span class="n">to</span> <span class="n">prevent</span> <span class="n">floating</span> <span class="n">parts</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>  <span class="n">Change</span> <span class="n">the</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">occupation</span> <span class="ow">and</span> <span class="n">availability</span> <span class="n">lattice</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="n">Output</span><span class="p">:</span> <span class="n">Initialized</span> <span class="n">agents</span> <span class="p">(</span><span class="n">occupation</span> <span class="n">lattice</span> <span class="ow">and</span> <span class="n">availability</span> <span class="n">lattice</span><span class="p">)</span>
</code></pre></div>
</td></tr></table></p>
<h3 id="change-value"><strong> Change value</strong></h3>
<blockquote>
<p>This function is created to occupy voxels or to leave voxels. In the beginning the agents will eat voxels. When the maximum amount of voxels is reached, the values of the neighbours is are compared with the internal voxels. When the neighbour has a value which is 10% higher than the internal voxel, one will be let go and the other one will be occupied. This all happens within the same function. </p>
</blockquote>
<figure>
<p><img align="left" alt="Change" src="../../img/change_value.png" />
  </p>
<figcaption>Change value</figcaption>
</figure>
<p><strong> Pseudo code</strong>
<table class="highlighttable"><tr><th colspan="2" class="filename"><div class="highlight"><span class="filename">Change_value.py</span></div></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">Input</span><span class="p">:</span> <span class="n">occupation</span> <span class="n">lattice</span><span class="p">,</span> <span class="n">availability</span> <span class="n">lattice</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">agent</span> <span class="n">location</span> <span class="nb">list</span><span class="p">,</span> <span class="n">new</span> <span class="nb">id</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="n">If</span> <span class="n">the</span> <span class="n">voxel</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">get</span> <span class="n">occupied</span> <span class="p">(</span><span class="n">new</span> <span class="nb">id</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">in</span> <span class="n">occupation</span> <span class="n">lattice</span><span class="p">):</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>  <span class="n">Add</span> <span class="n">the</span> <span class="n">location</span> <span class="n">to</span> <span class="n">the</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">agent</span> <span class="n">locations</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>  <span class="n">Change</span> <span class="n">the</span> <span class="n">value</span> <span class="n">of</span> <span class="n">the</span> <span class="n">availability</span> <span class="n">lattice</span> <span class="n">to</span> <span class="n">occupied</span> <span class="p">(</span><span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="n">Else</span> <span class="p">(</span><span class="n">voxel</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">removed</span><span class="p">):</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>  <span class="n">Remove</span> <span class="n">the</span> <span class="n">location</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">agent</span> <span class="n">locations</span> <span class="nb">list</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>  <span class="n">Change</span> <span class="n">the</span> <span class="n">value</span> <span class="n">of</span> <span class="n">the</span> <span class="n">availability</span> <span class="n">lattice</span> <span class="n">to</span> <span class="n">unoccupied</span> <span class="p">(</span><span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>  <span class="n">Change</span> <span class="n">the</span> <span class="n">value</span> <span class="n">of</span> <span class="n">the</span> <span class="n">occupation</span> <span class="n">lattice</span> <span class="n">to</span> <span class="n">the</span> <span class="n">new</span> <span class="nb">id</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="n">Output</span><span class="p">:</span> <span class="n">new</span> <span class="n">occupation</span> <span class="n">lattice</span><span class="p">,</span> <span class="n">new</span> <span class="n">availability</span> <span class="n">lattice</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">agents</span> <span class="n">location</span> <span class="nb">list</span>
</code></pre></div>
</td></tr></table></p>
<h2 id="special-behaviours"><strong> Special behaviours</strong></h2>
<h3 id="squareness"><strong> Squareness</strong></h3>
<blockquote>
<p>Squareness is a behaviour we created to encourage the agents to grow in rectangular shapes to create usable spaces. When a neighbour exists for multiple voxels it will increase the squareness and therefore its value will be raised.</p>
</blockquote>
<p>This gif illustrates the effect of this behaviour. It can be seen that the agents grow in a rectangular shape.
The behaviour works the way it was supposed to work, so there are no recommendations for improvement on this behaviour.</p>
<figure>
<p><img alt="GIF" src="../../img/gif_squareness.gif" />
  </p>
<figcaption>Gif of the squareness</figcaption>
</figure>
<figure>
<p><img align="left" alt="Squareness" src="../../img/squareness.png" />
  </p>
<figcaption>Squareness</figcaption>
</figure>
<p><strong> Pseudo code</strong>
<table class="highlighttable"><tr><th colspan="2" class="filename"><div class="highlight"><span class="filename">Squareness.py</span></div></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">Input</span><span class="p">:</span> <span class="mi">1</span><span class="n">d</span> <span class="n">location</span> <span class="n">of</span> <span class="n">the</span> <span class="n">free</span> <span class="n">neighbours</span><span class="p">,</span> <span class="n">squareness</span> <span class="n">weight</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="n">use</span> <span class="n">the</span> <span class="n">numpy</span> <span class="n">unique</span> <span class="n">function</span> <span class="n">to</span><span class="p">:</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="k">return</span> <span class="n">how</span> <span class="n">many</span> <span class="n">times</span> <span class="n">each</span> <span class="n">neighbour</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">the</span> <span class="nb">list</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="k">return</span> <span class="n">what</span> <span class="n">the</span> <span class="n">first</span> <span class="n">unique</span> <span class="n">index</span> <span class="ow">is</span> <span class="n">of</span> <span class="n">each</span> <span class="n">neighbour</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="k">for</span> <span class="n">every</span> <span class="n">unique</span> <span class="n">free</span> <span class="n">neighbour</span><span class="p">:</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>  <span class="n">evaluate</span> <span class="n">each</span> <span class="n">agent</span> <span class="k">with</span> <span class="n">the</span> <span class="err">“</span><span class="n">evaluate_voxel</span><span class="err">”</span> <span class="n">function</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>  <span class="k">raise</span> <span class="n">the</span> <span class="n">squareness</span> <span class="n">weight</span> <span class="n">by</span> <span class="n">the</span> <span class="n">amount</span> <span class="n">of</span> <span class="n">times</span> <span class="n">the</span> <span class="n">neighbour</span> <span class="n">exist</span> <span class="o">-</span> <span class="mi">1</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>  <span class="n">multiply</span> <span class="n">the</span> <span class="n">old</span> <span class="n">value</span> <span class="k">with</span> <span class="n">the</span> <span class="n">calculated</span> <span class="n">squareness</span> <span class="n">value</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="n">output</span><span class="p">:</span> <span class="n">value</span> <span class="n">of</span> <span class="n">each</span> <span class="n">free</span> <span class="n">neighbour</span>
</code></pre></div>
</td></tr></table></p>
<h3 id="prevent-floating-agents">Prevent floating agents</h3>
<blockquote>
<p>This behaviour is created to prevent agents from floating in the air in order to create a more realistic building. By only making the voxels available which have voxels beneath, the agents can only grow at places which are connected to the ground</p>
</blockquote>
<p>This example is made with the same preferences as in the squareness example. The effect of this behaviour can be clearly seen. None of the agents are floating in the air, they only go up or to the side, that means the behaviour works as expected. However, the agents tend to go up whereas in the previous example of the squareness, the agents did not want to go up. To improve this behaviour it is necessary to find out why this is happening and thereby how to improve it such that the agents do not only want to go up.</p>
<figure>
<p><img align="left" alt="Update" src="../../img/gif_no_float.gif" />
  </p>
<figcaption>GIF Prevent floating agents</figcaption>
</figure>
<figure>
<p><img align="left" alt="Update" src="../../img/update.png" />
  </p>
<figcaption>Prevent floating agents</figcaption>
</figure>
<p><strong> Pseudo code</strong>
<table class="highlighttable"><tr><th colspan="2" class="filename"><div class="highlight"><span class="filename">Prevent_floating.py</span></div></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span>
<span class="normal"><a href="#__codelineno-4-7">7</a></span>
<span class="normal"><a href="#__codelineno-4-8">8</a></span>
<span class="normal"><a href="#__codelineno-4-9">9</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">Input</span><span class="p">:</span> <span class="n">occupation</span> <span class="n">lattice</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="n">Retrieve</span> <span class="n">the</span> <span class="n">location</span> <span class="n">of</span> <span class="n">the</span> <span class="n">occupied</span> <span class="n">voxels</span> <span class="p">(</span><span class="nb">id</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="n">Move</span> <span class="n">the</span> <span class="n">occupied</span> <span class="n">voxels</span> <span class="n">one</span> <span class="n">place</span> <span class="n">up</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="n">Subtract</span> <span class="n">the</span> <span class="n">new</span> <span class="n">occupation</span> <span class="n">lattice</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">old</span> <span class="n">occupation</span> <span class="n">lattice</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="n">Now</span> <span class="n">only</span> <span class="n">the</span> <span class="n">voxels</span> <span class="k">with</span> <span class="n">voxels</span> <span class="n">beneath</span> <span class="n">are</span> <span class="n">available</span> <span class="p">(</span><span class="nb">id</span> <span class="o">=</span> <span class="mi">1</span> <span class="ow">in</span> <span class="n">avail_lattice</span><span class="p">)</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="n">Set</span> <span class="n">the</span> <span class="n">voxels</span> <span class="n">on</span> <span class="n">ground</span> <span class="n">level</span> <span class="n">which</span> <span class="n">have</span> <span class="n">now</span> <span class="n">the</span> <span class="n">value</span> <span class="mi">0</span> <span class="p">(</span><span class="n">unoccupied</span><span class="p">)</span> <span class="n">to</span> <span class="mi">1</span> <span class="n">so</span> <span class="n">the</span> <span class="n">agent</span> <span class="n">can</span> <span class="n">grow</span> <span class="n">to</span> <span class="n">the</span> <span class="n">sides</span> <span class="k">as</span> <span class="n">well</span><span class="o">.</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="n">Output</span><span class="p">:</span> <span class="n">new</span> <span class="n">availability</span> <span class="n">lattice</span>
</code></pre></div>
</td></tr></table></p>
<h3 id="limiting-building-depth">Limiting building depth</h3>
<blockquote>
<p>This behaviour limits the building depth in the horizontal directions. This is done to get as much light in the building as possible and thereby achieve one of the design principles, creating good living conditions. The skylight and sunlight hits the building at an angle and therefore it cannot reach too far in a space.</p>
</blockquote>
<figure>
<p><img align="left" alt="Depth" src="../../img/building_depth.png" />
  </p>
<figcaption>Building depth</figcaption>
</figure>
<p>In the two gifs beneath, you can see how this behaviour works on the growth of the agents. For the first simulation a maximum building depth of 3 voxels is used. It can be seen that there are never more than 3 voxels next to each other in the x- or y-direction.
The second simulation uses a maximum building depth of 6 voxels. In this example you can clearly see the effect of this behaviour. The yellow agent wants to grow towards the purple agent, but it cannot grow in one straight line, because then it will exceed the building depth. Therefore it grows to the side at some places.</p>
<figure>
<p><img alt="GIF" src="../../img/gif_building_depth.gif" />
  </p>
<figcaption>Gif of the building depth (3)</figcaption>
</figure>
<figure>
<p><img alt="GIF" src="../../img/gif_building_depth_6.gif" />
  </p>
<figcaption>Gif of the building depth (6)</figcaption>
</figure>
<p>This behaviour can be optimized in future projects. At this moment the function looks at the x- and y-direction separately. However, when you look at the second example, one row of voxels of more than 6 voxels would not be a problem for the sun access. It becomes a problem when the maximum building depth is reached in both directions, this should be taken into account when improving this behaviour.</p>
<p><strong> Pseudo code</strong>
<table class="highlighttable"><tr><th colspan="2" class="filename"><div class="highlight"><span class="filename">Building_depth.py</span></div></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span>
<span class="normal"><a href="#__codelineno-5-6">6</a></span>
<span class="normal"><a href="#__codelineno-5-7">7</a></span>
<span class="normal"><a href="#__codelineno-5-8">8</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">Input</span><span class="p">:</span> <span class="n">occupation</span> <span class="n">lattice</span><span class="p">,</span> <span class="n">availability</span> <span class="n">lattice</span><span class="p">,</span> <span class="nb">max</span><span class="o">.</span> <span class="n">building</span> <span class="n">depth</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="n">Create</span> <span class="n">stencils</span> <span class="n">to</span> <span class="n">check</span> <span class="n">the</span> <span class="n">different</span> <span class="n">directions</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="n">Create</span> <span class="n">conditions</span> <span class="k">for</span> <span class="n">each</span> <span class="n">direction</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="n">In</span> <span class="n">the</span> <span class="n">x</span><span class="o">-</span><span class="n">direction</span> <span class="n">there</span> <span class="n">can</span><span class="err">’</span><span class="n">t</span> <span class="n">be</span> <span class="n">more</span> <span class="n">voxels</span> <span class="nb">next</span> <span class="n">to</span> <span class="n">each</span> <span class="n">other</span> <span class="n">than</span> <span class="n">the</span> <span class="nb">max</span> <span class="n">building</span> <span class="n">depth</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="n">In</span> <span class="n">the</span> <span class="n">y</span><span class="o">-</span><span class="n">direction</span> <span class="n">there</span> <span class="n">can</span><span class="err">’</span><span class="n">t</span> <span class="n">be</span> <span class="n">more</span> <span class="n">voxels</span> <span class="nb">next</span> <span class="n">to</span> <span class="n">each</span> <span class="n">other</span> <span class="n">than</span> <span class="n">the</span> <span class="nb">max</span> <span class="n">building</span> <span class="n">depth</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="n">Output</span><span class="p">:</span> <span class="n">new</span> <span class="n">availability</span> <span class="n">lattice</span>
</code></pre></div>
</td></tr></table></p>
<h3 id="final-mass"><strong> Final mass</strong></h3>
<blockquote>
<p>Before choosing the final mass, we experimented with the use of different combinations of behaviours. We ran the simulation multiple times to see the effect of some specific behaviours, especially the function which prevents floating parts and the function on limiting the building depth. The results are shown below and evaluated.</p>
</blockquote>
<h3 id="behaviours-and-expectations">Behaviours and expectations</h3>
<p>Both off:
The first configuration is the result of the simulation with both functions turned off. This configuration consists out of one big mass with for a big part a horizontal roof. This makes it difficult for the sun to penetrate the middle of the building. One of the design principles was to create a good living condition with as much light as possible. This configuration does not meet this criteria. </p>
<figure>
<p><img align="left" alt="Mass options" src="../../img/mass_both_off.png" />
  </p>
<figcaption>Mass variant, both functions off</figcaption>
</figure>
<p>No float function:
In the second configuration the behaviour which prevents floating agents is turned on. This function has the effect that all the agents want to go up and therefor it creates a massive wall of about 44 metres high. The building will cast too much shadow on the neighbours, as it is outside the solar envelope, and is therefore not an option.
To prevent getting a big wall as configuration, there needs to be experimented with extra fields which will push some of the agents to the other side of the plot. </p>
<figure>
<p><img align="left" alt="Mass options" src="../../img/mass_no_float.png" />
  </p>
<figcaption>Mass variant, float function on</figcaption>
</figure>
<p>Both on:
The third time we ran the simulation with both behaviours on. The third configuration is similar to the second configuration. The difference is that there are some holes in the wall, because of the maximum building depth of 3 voxels. However, for the overall shape, the behaviour of preventing floating parts has more impact than the limitation of the building depth. 
As with the previous configuration is this mass too high, so it will cast too much shadow, as the building is outside the solar envelope, and is therefore not a fit for our project.</p>
<figure>
<p><img align="left" alt="Mass options" src="../../img/mass_both_on.png" />
  </p>
<figcaption>Mass variant, both functions on</figcaption>
</figure>
<p>Building depth:
For the last configuration, only the limitation of the building depth is used. We choose a maximum building depth of 3 voxels, because then the building depth will become at most about 10 metres. When there are windows on both sides, most part of the building will be able to get sunlight. 
The result is a configuration which looks like the first configuration, but with a lot more height differences in the roof and walls. Therefore the sun can penetrate the building at more places. Next to that, the building does not cast too much shadow on the surrounding. To conclude, this configuration fits our design goals best and will therefore be our final mass. </p>
<p>However, this configuration can be improved in later projects. At this moment, the building depth behaviour does not take into account that there can be an agent above an empty voxel. The effect is that there are holes in the middle of the building where still the sun cannot get. To create a building which will at all places receive as much sun as possible, the building depth behaviour needs to be adapted. </p>
<figure>
<p><img align="left" alt="Final mass" src="../../img/massing.png" />
  </p>
<figcaption>Final mass, float off, depth on</figcaption>
</figure>
<h3 id="gif-growth-example">GIF growth example</h3>
<blockquote>
<p>The gif below shows an example of the development of the field, which means where the agent wants to grow. The student house is chosen for this example. At the initialisation stage, the agent only looks at the external preferences, such as sun access and distance to the entrance. At this point the agent wants to be at the right of the envelope. When the agent starts to grow, it will also take the connection between other agents into consideration. It slowly wants to grow more towards the middle. This analysis gives an insight in the way the agents want to behave. </p>
</blockquote>
<figure>
<p><img align="left" alt="Growth" src="../../img/student_house_growth.gif" />
  </p>
<figcaption>Student house growth</figcaption>
</figure>
<table>
<thead>
<tr>
<th>Space ID</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Voxel amount</td>
<td>185</td>
</tr>
<tr>
<td>Sun Acc.</td>
<td>0.7</td>
</tr>
<tr>
<td>Ground</td>
<td>0</td>
</tr>
<tr>
<td>Greenery</td>
<td>0.6</td>
</tr>
<tr>
<td>Noise</td>
<td>0</td>
</tr>
<tr>
<td>Sky View</td>
<td>0.7</td>
</tr>
<tr>
<td>Ground</td>
<td>0</td>
</tr>
<tr>
<td>Greenery</td>
<td>0.6</td>
</tr>
<tr>
<td>Entrance acc.</td>
<td>0</td>
</tr>
<tr>
<td>-----------</td>
<td>-----------</td>
</tr>
<tr>
<td>ID</td>
<td>Value</td>
</tr>
<tr>
<td>-----------</td>
<td>-----------</td>
</tr>
<tr>
<td>0</td>
<td>0.5</td>
</tr>
<tr>
<td>1</td>
<td>0.5</td>
</tr>
<tr>
<td>2</td>
<td>0.25</td>
</tr>
<tr>
<td>3</td>
<td>0.</td>
</tr>
<tr>
<td>4</td>
<td>0  .25</td>
</tr>
<tr>
<td>5</td>
<td>0</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
</tr>
<tr>
<td>7</td>
<td>0</td>
</tr>
</tbody>
</table>
<h3 id="centers-of-clusters"><strong> Centers of clusters</strong></h3>
<blockquote>
<p>To be able to compute the shafts and corridors throughout the building, we first need to calculate the average voxel of each agent. This is done by calculating the centre of each cluster.</p>
</blockquote>
<figure>
<p><img align="left" alt="Clusters" src="../../img/cluster_centers_background.png" />
  </p>
<figcaption>Centers of clusters</figcaption>
</figure>
<p><strong> Pseudo code</strong>
<table class="highlighttable"><tr><th colspan="2" class="filename"><div class="highlight"><span class="filename">Cluster_centers.py</span></div></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">Input</span><span class="p">:</span> <span class="n">massing</span> <span class="n">lattice</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="n">Find</span> <span class="n">the</span> <span class="n">different</span> <span class="n">clusters</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">grown</span> <span class="n">ABM</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="n">Choose</span> <span class="n">which</span> <span class="n">voxel</span> <span class="n">fits</span> <span class="n">the</span> <span class="n">best</span> <span class="k">as</span> <span class="n">centre</span> <span class="n">of</span> <span class="n">the</span> <span class="n">agent</span> <span class="n">cluster</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="n">Output</span><span class="p">:</span> <span class="n">cluster</span> <span class="n">centers</span>
</code></pre></div>
</td></tr></table></p>
<h3 id="shafts"><strong> Shafts</strong></h3>
<blockquote>
<p>The shafts will be placed at the most central places of the building. Therefore the centres of the clusters are used to find the four most central places, these are the places for the shafts.</p>
</blockquote>
<figure>
<p><img align="left" alt="Shafts" src="../../img/shafts_background.png" />
  </p>
<figcaption>Shafts</figcaption>
</figure>
<p><strong> Pseudo code</strong>
<table class="highlighttable"><tr><th colspan="2" class="filename"><div class="highlight"><span class="filename">Shaft_forming.py</span></div></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">Input</span><span class="p">:</span> <span class="n">cluster</span> <span class="n">centers</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="n">Create</span> <span class="mi">4</span> <span class="n">clusters</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">chosen</span> <span class="n">cluster</span> <span class="n">centres</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="n">Choose</span> <span class="n">which</span> <span class="n">row</span> <span class="n">of</span> <span class="n">voxels</span> <span class="n">fits</span> <span class="n">the</span> <span class="n">best</span> <span class="k">as</span> <span class="n">centre</span> <span class="n">of</span> <span class="n">the</span> <span class="n">clusters</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="n">Output</span><span class="p">:</span> <span class="n">shafts</span>
</code></pre></div>
</td></tr></table></p>
<h3 id="paths"><strong> Paths</strong></h3>
<blockquote>
<p>The corridors will create paths between the different spaces and the shafts and eventually will form the connection with the entrance. To lose the least space on corridors, the shortest path is found between the space and one of the shafts. On ground level the shafts are connected to the main entrance, so the visitors will be able to get to the entrance. </p>
</blockquote>
<figure>
<p><img align="left" alt="Paths" src="../../img/paths_background.png" />
  </p>
<figcaption>Paths</figcaption>
</figure>
<p><strong> Pseudo code</strong>
<table class="highlighttable"><tr><th colspan="2" class="filename"><div class="highlight"><span class="filename">Corridor_forming.py</span></div></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span>
<span class="normal"><a href="#__codelineno-8-7">7</a></span>
<span class="normal"><a href="#__codelineno-8-8">8</a></span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">Input</span><span class="p">:</span> <span class="n">shafts</span><span class="p">,</span> <span class="n">main</span> <span class="n">entrance</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="n">For</span> <span class="n">every</span> <span class="n">cluster</span> <span class="n">center</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a>  <span class="n">Find</span> <span class="n">the</span> <span class="n">shortest</span> <span class="n">path</span> <span class="n">to</span> <span class="n">a</span> <span class="n">shaft</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="n">For</span> <span class="n">every</span> <span class="n">shaft</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a>  <span class="n">Find</span> <span class="n">the</span> <span class="n">shortest</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">main</span> <span class="n">entrance</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="n">Output</span><span class="p">:</span> <span class="n">corridors</span>
</code></pre></div>
</td></tr></table></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../../Configuring/a2_configuring_product/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Product
              </div>
            </div>
          </a>
        
        
          <a href="../a3_massing_product/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Product
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/SarahEdelaar/spatial_computing_project_template" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.7e0ee788.min.js"></script>
      <script src="../../assets/javascripts/bundle.c1ccee15.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>